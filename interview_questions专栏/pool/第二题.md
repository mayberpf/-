# 第二题
### 池化操作是如何进行的前传和后传的？最大池化和平均池化的区别是什么？最大池化和平均池化的作用分别是什么？如何判断在什么情况下应该用平均池化，什么情况下用最大池化？
### 个人见解
我对池化的理解就是针对一个特征图，通过设定kernel_size大小，最大池化就是求最大值，平均池化就是求平均值。这是池化的前传。而针对后传，没有了解过，因为反向传播通常都是使用```loss.backward()```
作用的话，可以提取出不同的特征：最大池化提取最大特征，因为这个最大值是通过各种卷积提取出来的，而一般值越大代表和真实值更相似。比如说目标检测，使用最大池化，将最大值拿出来，就代表那一像素点的感受野内存在目标。
@import "1.jpg " {width="1080px" height="244px" title="最大池化" alt="最大池化图片" }
图片来源：https://zhuanlan.zhihu.com/p/381752896
### 开始学习
#### 池化可以看作是只取用某一个区域的关键特征，忽略其他特征
#### 池化的作用
1、池化的结果使得特征减少，参数减少，防止过拟合，提高模型泛化能力，但池化的目的并不仅于此
2、池化的目的是为了保持某种不变性（旋转，平移，伸缩等）
对于2的理解就是--->图片的平移旋转和伸缩对池化提取出的特征是没有影响的。具体参考：http://t.csdn.cn/Z9n4j
池化反向传播：把一个像素扩展开，将梯度传递给多个像素，但是需要保证传递的loss（或者梯度）总和不变。平均池化就是把梯度平均下发到每个像素值。最大池化额外需要保留最大值所在的像素位置，将梯度下发到该位置，其位置置为0。
@import "2.png " {width="1080px" height="244px" title="平均池化反向传播" alt="平均池化反向传播" }
@import "3.png " {width="1080px" height="244px" title="最大池化传播" alt="最大池化传播" }
参考：http://t.csdn.cn/hWBlQ
根据相关理论，特征提取的误差主要来自两个方面：
（1）邻域大小受限造成的估计值方差增大；
（2）卷积层参数误差造成估计均值的偏移。
一般来说，mean-pooling能减小第一种误差，更多的保留图像的背景信息，max-pooling能减小第二种误差，更多的保留纹理信息。
Stochastic-pooling则介于两者之间，通过对像素点按照数值大小赋予概率，再按照概率进行亚采样，在平均意义上，与mean-pooling近似，在局部意义上，则服从max-pooling的准则。参考：http://t.csdn.cn/u3qQ7


# 补充
池化的作用
抑制噪声，降低信息冗余
提升模型的尺度不变性，旋转不变性
减低模型计算量
防止过拟合
此外，最大池化作用：保留主要特征，突出前景，提取特征的纹理信息。平均池化作用：保留背景信息，突出背景。

使用场景
一般而言，前景的亮度会高于背景，因此正如前面提到最大池化具有提取特征突出前景的作用，但在个别场合，前景暗于背景时，最大池化就不具备突出前景的作用了。
因此，当特征中只有部分信息比较有用时，使用最大池化。如网络前面的层，图像存在噪声和很多无用的背景信息，尝试用最大池化。
同理，当特征图中所有信息都比较有用时，使用平均池化。如网络的最后基层，最常见的是进入分类部分的全连接层前，常常都使用平均池化。，这是因为最后几层都包含了比较丰富的语义信息，使用最大池化会丢失很多重要信息。
金字塔池化
ROI池化
重叠池化
随机池化
全局自适应池化
双线性池化
